{% extends "layout.html" %}

{% block title %}Expenses - Pharmacy App{% endblock %}

{% block content %}
<h2>Expenses</h2>

<p>
  <a href="{{ url_for('financial.financial_home') }}">‚Üê Back to Financial</a>
</p>

<h3>Record Expense</h3>

<form method="POST">
  <div>
    <label>Date</label><br>
    <input type="date" name="expense_date">
  </div>

  <div>
    <label>Category</label><br>
    <input type="text" name="category" placeholder="Rent / Utilities / Salary / Transport" required>
  </div>

  <div>
    <label>Description (optional)</label><br>
    <input type="text" name="description" placeholder="More detail (optional)">
  </div>

  <div>
    <label>Amount</label><br>
    <input type="number" step="0.01" name="amount" min="0.01" required>
  </div>

  <button type="submit">Save Expense</button>
</form>

<hr>

<h3>Recent Expenses</h3>

{% if recent_expenses %}
  <table border="1" cellpadding="5">
    <tr>
      <th>#</th>
      <th>Date</th>
      <th>Category</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Action</th>
    </tr>
    {% for e in recent_expenses %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ e.expense_date }}</td>
      <td>{{ e.category }}</td>
      <td>{{ e.description or "" }}</td>
      <td>{{ "%.2f"|format(e.amount) }}</td>
      <td>
        <form method="POST" action="{{ url_for('financial.delete_expense', expense_id=e.id) }}"
              onsubmit="return confirm('Delete this expense?');">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
{% else %}
  <p>No expenses yet.</p>
{% endif %}

{% endblock %}
